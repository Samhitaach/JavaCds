 package steps;
import io.cucumber.java.en.*;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

(String, Integer, Float, Boolean, Date, etc.) 
public class DataTypesSteps {

    private int intValue;
    private float floatValue;
    private boolean boolValue;
    private Date dateValue;

    @Given("I have an integer value {int}")
    public void i_have_an_integer_value(Integer value) {
        this.intValue = value;
    }

    @Given("I have a float value {float}")
    public void i_have_a_float_value(Float value) {
        this.floatValue = value;
    }

    @Given("I have a boolean value {word}")
    public void i_have_a_boolean_value(String value) {
        // Convert string to boolean safely
        this.boolValue = Boolean.parseBoolean(value);
    }

    @Given("I have a date value {string}")
    public void i_have_a_date_value(String dateStr) {
        try {
            // Parse date in yyyy-MM-dd format
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
            this.dateValue = sdf.parse(dateStr);
        } catch (ParseException e) {
            throw new IllegalArgumentException("Invalid date format. Use yyyy-MM-dd", e);
        }
    }

    @Then("I print all values")
    public void i_print_all_values() {
        System.out.println("Integer: " + intValue);
        System.out.println("Float: " + floatValue);
        System.out.println("Boolean: " + boolValue);
        System.out.println("Date: " + dateValue);
    }
}

public class ApiSteps {

    private Response response;
    private RequestSpecification request;
    private String baseUri = "https://api.example.com";
    private String token;

    @Given("the API base URI is set")
    public void setBaseUri() {
        RestAssured.baseURI = baseUri;
        request = given().contentType(ContentType.JSON);
    }
for auth token
    @When("I authenticate with username {string} and password {string}")
    public void authenticate(String username, String password) {
        response = given()
                .contentType(ContentType.JSON)
                .body(Map.of("username", username, "password", password))
                .post("/auth/login");
    }

    @Then("the response status code should be {int}")
    public void verifyStatusCode(int statusCode) {
        response.then().statusCode(statusCode);
    }


    @Then("the JSON field {string} should be present")
    public void jsonFieldPresent(String jsonPath) {
        response.then().body(jsonPath, notNullValue());
    }

    @Then("the JSON field {string} should be null")
    public void jsonFieldNull(String jsonPath) {
        response.then().body(jsonPath, nullValue());
    }

    @Then("the JSON field {string} should be {string}")
    public void jsonFieldEquals(String jsonPath, String expected) {
        response.then().body(jsonPath, equalTo(expected));
    }

    @Given("I have a valid auth token")
    public void iHaveValidAuthToken() {
        Response authResponse = given()
                .contentType(ContentType.JSON)
                .body(Map.of("username", "validUser", "password", "validPass"))
                .post("/auth/login");
for bearer token
        token = authResponse.jsonPath().getString("token");
        request = given()
                .contentType(ContentType.JSON)
                .header("Authorization", "Bearer " + token);
    }

    @When("I send a GET request to {string}")
    public void sendGet(String path) {
        response = request.when().get(path);
    }

    @Given("I set request body from {string}")
    public void setRequestBodyFromFile(String fileName) throws IOException {
        String body = Files.readString(Paths.get("src/test/resources/payloads/" + fileName));
        request = request.body(body);
    }

    @When("I send a POST request to {string}")
    public void sendPost(String path) {
        response = request.when().post(path);
    }
}

Using Hooks:
package stepdefinitions;

import io.cucumber.java.Before;
import io.cucumber.java.After;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

public class Hooks {

    // WebDriver instance shared across all step definitions
    public WebDriver driver;

    // Initialize WebDriver before each scenario
    @Before("@LoginTest")
    public void setup() {
        System.setProperty("webdriver.chrome.driver", "C:\\Users\\Change the path of the chromedriver\\drivers\\chromedriver.exe");
        driver = new ChromeDriver();
        System.out.println("Browser initialized for Login Test");
    }

    // Clean up WebDriver after each scenario
    @After("@LoginTest")
    public void teardown() {
        if (driver != null) {
            driver.quit();
            System.out.println("Browser closed after Login Test");
        }
    }
}
Using Scenario Outline:

Scenario Outline: Add items to cart
  Given I am on the product page
  When I add <quantity> of <product> to cart
  Then I should see <total> in cart

Examples:
  | quantity | product | total |
  | 1              | Phone   | 500   |
  | 2            | Laptop  | 2000  |

Use JSON or XML to represent complex data structures.

Scenario Outline: Validate user data
  Given I am on the user page
  When I enter <user_data>
  Then I should see <message>

Examples:
  | user_data                     | message    |
  | { "name": "John", "age": 30 } | Welcome John |
  | { "name": "Jane", "age": 25 } | Welcome Jane |

Using data in table format:

Scenario: Create user and verify details
  When I create a user with details
    | firstName | lastName | email              | role  |
    | Ram       | Kumar    | ram@example.com    | ADMIN |
  Then the created user details should be shown correctly

public class UserSteps {

    // Simple shared state between steps
    private Map<String, String> userData;
    private Response response;

    @When("I create a user with details")
    public void i_create_a_user_with_details(DataTable table) {
        // Convert single-row table to Map
        userData = table.asMaps(String.class, String.class).get(0);

        // Use it for API/UI
        response = given()
                .contentType(ContentType.JSON)
                .body(userData)
                .post("/users");
    }

    @Then("the created user details should be shown correctly")
    public void the_created_user_details_should_be_shown_correctly() {
        response.then().statusCode(201);
        response.then().body("firstName", equalTo(userData.get("firstName")));
        response.then().body("lastName", equalTo(userData.get("lastName")));
        response.then().body("email", equalTo(userData.get("email")));
    }
}

CSV file → List<Map> (or POJO) → shared context
CSV file as
firstName,lastName,email,role
Ram,Kumar,ram@example.com,ADMIN
Sita,Devi,sita@example.com,USER

Using simple BufferedReader to build a List<Map<String,String>>:

@Given("I load users from csv file {string}")
public void i_load_users_from_csv_file(String fileName) throws IOException {
    Path path = Paths.get("src/test/resources/testdata/", fileName);

    List<Map<String, String>> users = new ArrayList<>();
    try (BufferedReader br = Files.newBufferedReader(path)) {
        String headerLine = br.readLine();
        String[] headers = headerLine.split(",");

        String line;
        while ((line = br.readLine()) != null) {
            String[] values = line.split(",");
            Map<String, String> row = new HashMap<>();
            for (int i = 0; i < headers.length; i++) {
                row.put(headers[i], values[i]);
            }
            users.add(row);
        }
    }
    scenarioContext.set("usersData", users);
}
@When("I create all csv users")
public void i_create_all_csv_users() {
    List<Map<String, String>> users =
            scenarioContext.get("usersData", List.class);
    List<Response> responses = new ArrayList<>();

    for (Map<String, String> user : users) {
        Response resp = given()
                .contentType(ContentType.JSON)
                .body(user)
                .post("/users");
        responses.add(resp);
    }
    scenarioContext.set("userResponses", responses);
}


